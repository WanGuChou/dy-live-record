# Fyne ä¸­æ–‡å­—ä½“ä¹±ç è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°

Fyne GUI ç•Œé¢ä¸­æ–‡æ˜¾ç¤ºä¸ºä¹±ç æˆ–æ–¹å—å­—ç¬¦ã€‚

## æ ¹æœ¬åŸå› 

Fyne é»˜è®¤ä½¿ç”¨çš„å­—ä½“ä¸åŒ…å«ä¸­æ–‡å­—ç¬¦é›†ï¼ˆCJKï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šæ”¯æŒä¸­æ–‡çš„å­—ä½“ã€‚

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ³• 1ï¼šè‡ªåŠ¨æŸ¥æ‰¾ç³»ç»Ÿå­—ä½“ï¼ˆæ¨èï¼‰âœ…

ä½¿ç”¨ `go-findfont` åº“è‡ªåŠ¨æŸ¥æ‰¾å¹¶è®¾ç½®ç³»ç»Ÿä¸­æ–‡å­—ä½“ã€‚

#### å®ç°ä»£ç 

```go
import "github.com/flopp/go-findfont"

func init() {
    // è®¾ç½®ä¸­æ–‡å­—ä½“ï¼šè§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜
    log.Println("ğŸ” æ­£åœ¨æŸ¥æ‰¾ç³»ç»Ÿä¸­æ–‡å­—ä½“...")
    
    fontPaths := findfont.List()
    fontFound := false
    
    // ä¼˜å…ˆçº§é¡ºåºï¼šå¾®è½¯é›…é»‘ > é»‘ä½“ > å®‹ä½“ > æ¥·ä½“
    fontPriority := []string{"msyh.ttf", "msyhbd.ttf", "simhei.ttf", "simsun.ttc", "simkai.ttf"}
    
    for _, fontName := range fontPriority {
        for _, path := range fontPaths {
            if strings.Contains(strings.ToLower(path), strings.ToLower(fontName)) {
                os.Setenv("FYNE_FONT", path)
                log.Printf("âœ… æ‰¾åˆ°ä¸­æ–‡å­—ä½“: %s", path)
                fontFound = true
                break
            }
        }
        if fontFound {
            break
        }
    }
    
    if !fontFound {
        log.Println("âš ï¸  è­¦å‘Šï¼šæœªæ‰¾åˆ°å¸¸è§ä¸­æ–‡å­—ä½“ï¼Œå°†ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ä½“")
    }
}
```

#### å®‰è£…ä¾èµ–

```bash
cd server-go
go get github.com/flopp/go-findfont
go mod tidy
```

#### å­—ä½“ä¼˜å…ˆçº§

1. **Microsoft YaHei (å¾®è½¯é›…é»‘)** - `msyh.ttf` â­ æ¨è
   - Windows é»˜è®¤ç°ä»£ä¸­æ–‡å­—ä½“
   - æ˜¾ç¤ºæ•ˆæœæœ€ä½³
   
2. **Microsoft YaHei Bold** - `msyhbd.ttf`
   - å¾®è½¯é›…é»‘ç²—ä½“ç‰ˆæœ¬
   
3. **SimHei (é»‘ä½“)** - `simhei.ttf`
   - Windows ç»å…¸é»‘ä½“
   
4. **SimSun (å®‹ä½“)** - `simsun.ttc`
   - Windows ç»å…¸å®‹ä½“
   
5. **KaiTi (æ¥·ä½“)** - `simkai.ttf`
   - æ¥·ä½“å­—ä½“

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨è®¾ç½®å­—ä½“è·¯å¾„

å¦‚æœæ–¹æ³• 1 æ— æ•ˆï¼Œå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå­—ä½“ï¼š

```go
func init() {
    // ç›´æ¥æŒ‡å®šå­—ä½“è·¯å¾„
    os.Setenv("FYNE_FONT", "C:\\Windows\\Fonts\\msyh.ttf")
}
```

### æ–¹æ³• 3ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡

å¯åŠ¨ç¨‹åºå‰è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```batch
set FYNE_FONT=C:\Windows\Fonts\msyh.ttf
dy-live-monitor.exe
```

æˆ–åœ¨ PowerShell ä¸­ï¼š

```powershell
$env:FYNE_FONT="C:\Windows\Fonts\msyh.ttf"
.\dy-live-monitor.exe
```

## æµ‹è¯•æ­¥éª¤

### 1. ç¼–è¯‘ç¨‹åº

```bash
cd /workspace/server-go
go build -o dy-live-monitor.exe .
```

### 2. è¿è¡Œç¨‹åº

```bash
copy config.debug.json config.json
dy-live-monitor.exe
```

### 3. æ£€æŸ¥æ—¥å¿—è¾“å‡º

å¯åŠ¨æ—¶åº”è¯¥çœ‹åˆ°ï¼š

```
ğŸ” æ­£åœ¨æŸ¥æ‰¾ç³»ç»Ÿä¸­æ–‡å­—ä½“...
âœ… æ‰¾åˆ°ä¸­æ–‡å­—ä½“: C:\Windows\Fonts\msyh.ttf
```

### 4. æ£€æŸ¥ç•Œé¢

- âœ… çª—å£æ ‡é¢˜ï¼š`æŠ–éŸ³ç›´æ’­ç›‘æ§ç³»ç»Ÿ v3.2.1`
- âœ… Tab æ ‡ç­¾ï¼š`ğŸ“Š æ•°æ®æ¦‚è§ˆ`ã€`ğŸ ç¤¼ç‰©è®°å½•` ç­‰
- âœ… ç»Ÿè®¡å¡ç‰‡ï¼š`ç¤¼ç‰©æ€»æ•°: 0`ã€`æ¶ˆæ¯æ€»æ•°: 0` ç­‰
- âœ… æŒ‰é’®ï¼š`åˆ·æ–°æ•°æ®`ã€`å¯¼å‡º`ã€`æ¸…ç©º` ç­‰

## æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šæ—¥å¿—æ˜¾ç¤º"æœªæ‰¾åˆ°å¸¸è§ä¸­æ–‡å­—ä½“"

**åŸå› **ï¼šç³»ç»Ÿæ²¡æœ‰å®‰è£…å¸¸è§çš„ä¸­æ–‡å­—ä½“

**è§£å†³æ–¹æ³•**ï¼š
1. æ‰“å¼€ Windows è®¾ç½® â†’ æ—¶é—´å’Œè¯­è¨€ â†’ è¯­è¨€
2. ç¡®è®¤å·²å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…
3. æˆ–æ‰‹åŠ¨ä¸‹è½½å®‰è£… Microsoft YaHei å­—ä½“

### é—®é¢˜ 2ï¼šæ‰¾åˆ°å­—ä½“ä½†ä»ç„¶ä¹±ç 

**åŸå› **ï¼šå­—ä½“æ–‡ä»¶æŸåæˆ–è·¯å¾„ä¸æ­£ç¡®

**è§£å†³æ–¹æ³•**ï¼š
```bash
# æ£€æŸ¥å­—ä½“è·¯å¾„
dir "C:\Windows\Fonts\msyh.ttf"

# æ‰‹åŠ¨è®¾ç½®å…¶ä»–å­—ä½“
set FYNE_FONT=C:\Windows\Fonts\simhei.ttf
dy-live-monitor.exe
```

### é—®é¢˜ 3ï¼šéƒ¨åˆ†å­—ç¬¦æ˜¾ç¤ºæ­£å¸¸ï¼Œéƒ¨åˆ†ä¹±ç 

**åŸå› **ï¼šå­—ä½“ä¸æ”¯æŒæŸäº›ç‰¹æ®Šå­—ç¬¦

**è§£å†³æ–¹æ³•**ï¼š
- ä½¿ç”¨æ›´å®Œæ•´çš„å­—ä½“ï¼ˆæ¨èå¾®è½¯é›…é»‘ï¼‰
- é¿å…ä½¿ç”¨ç‰¹æ®Š Unicode å­—ç¬¦

## æŠ€æœ¯åŸç†

### Fyne å­—ä½“åŠ è½½æœºåˆ¶

1. **é»˜è®¤å­—ä½“**ï¼šFyne é»˜è®¤ä½¿ç”¨å†…åµŒçš„ `NotoSans` å­—ä½“
2. **ç¯å¢ƒå˜é‡**ï¼šé€šè¿‡ `FYNE_FONT` æŒ‡å®šè‡ªå®šä¹‰å­—ä½“
3. **å­—ä½“å›é€€**ï¼šå¦‚æœå­—ä½“ä¸æ”¯æŒæŸå­—ç¬¦ï¼Œå›é€€åˆ°ç³»ç»Ÿå­—ä½“

### go-findfont å·¥ä½œåŸç†

1. æ‰«æç³»ç»Ÿå­—ä½“ç›®å½•ï¼ˆWindows: `C:\Windows\Fonts\`ï¼‰
2. è¿”å›æ‰€æœ‰å­—ä½“æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
3. æ”¯æŒ `.ttf`ã€`.ttc`ã€`.otf` ç­‰æ ¼å¼

## æœ€ä½³å®è·µ

### 1. ä½¿ç”¨ init() å‡½æ•°

```go
func init() {
    // åœ¨åŒ…åˆå§‹åŒ–æ—¶è‡ªåŠ¨è®¾ç½®å­—ä½“
    // ç¡®ä¿åœ¨ä»»ä½• UI åˆ›å»ºä¹‹å‰æ‰§è¡Œ
}
```

### 2. æ·»åŠ æ—¥å¿—è¾“å‡º

```go
log.Printf("âœ… æ‰¾åˆ°ä¸­æ–‡å­—ä½“: %s", path)
```

æ–¹ä¾¿è°ƒè¯•å’Œç¡®è®¤å­—ä½“æ˜¯å¦æ­£ç¡®åŠ è½½ã€‚

### 3. è®¾ç½®ä¼˜å…ˆçº§

æŒ‰å­—ä½“è´¨é‡å’Œå…¼å®¹æ€§è®¾ç½®æŸ¥æ‰¾ä¼˜å…ˆçº§ï¼š

```go
fontPriority := []string{"msyh.ttf", "msyhbd.ttf", "simhei.ttf", "simsun.ttc", "simkai.ttf"}
```

### 4. æä¾›é™çº§æ–¹æ¡ˆ

```go
if !fontFound {
    log.Println("âš ï¸  è­¦å‘Šï¼šæœªæ‰¾åˆ°å¸¸è§ä¸­æ–‡å­—ä½“ï¼Œå°†ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å­—ä½“")
}
```

## ç›¸å…³æ–‡ä»¶

- `/workspace/server-go/internal/ui/fyne_ui.go` - UI ä¸»æ–‡ä»¶ï¼ŒåŒ…å« `init()` å‡½æ•°
- `/workspace/server-go/internal/ui/theme.go` - è‡ªå®šä¹‰ä¸»é¢˜ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
- `/workspace/server-go/go.mod` - ä¾èµ–ç®¡ç†ï¼ŒåŒ…å« `go-findfont`

## å‚è€ƒèµ„æ–™

- [Fyne å®˜æ–¹æ–‡æ¡£ - Custom Fonts](https://docs.fyne.io/started/fonts)
- [go-findfont GitHub](https://github.com/flopp/go-findfont)
- [Windows å­—ä½“ç›®å½•ç»“æ„](https://docs.microsoft.com/en-us/typography/fonts/windows_10_font_list)

## æ›´æ–°æ—¥å¿—

- **v3.2.1** (2025-11-16)
  - âœ… æ·»åŠ  `go-findfont` è‡ªåŠ¨å­—ä½“æŸ¥æ‰¾
  - âœ… å®ç°å­—ä½“ä¼˜å…ˆçº§æœºåˆ¶
  - âœ… æ·»åŠ è¯¦ç»†æ—¥å¿—è¾“å‡º
  - âœ… æ¢å¤å®Œæ•´ä¸­æ–‡ç•Œé¢

---

**å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š**
1. å¯åŠ¨æ—¥å¿—ä¸­çš„å­—ä½“è·¯å¾„
2. æˆªå›¾æ˜¾ç¤ºä¹±ç æƒ…å†µ
3. Windows ç‰ˆæœ¬å’Œå·²å®‰è£…å­—ä½“åˆ—è¡¨ (`dir C:\Windows\Fonts\*.ttf`)
