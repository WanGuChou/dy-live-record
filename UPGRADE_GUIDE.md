# å‡çº§æŒ‡å—ï¼šä» Node.js (v2.x) è¿ç§»åˆ° Go (v3.x)

## ğŸ“‹ ç‰ˆæœ¬å¯¹æ¯”

| ç‰¹æ€§ | v2.x (Node.js) | v3.x (Go) |
|------|----------------|-----------|
| **åç«¯è¯­è¨€** | Node.js | Go |
| **æ•°æ®åº“** | æ— æŒä¹…åŒ– | SQLite |
| **UI** | æ—  | WebView2 + ç³»ç»Ÿæ‰˜ç›˜ |
| **è®¸å¯è¯** | æ—  | RSA 2048 + MySQL |
| **ä¸»æ’­ç®¡ç†** | æ—  | âœ… å®Œæ•´æ”¯æŒ |
| **ç¦»çº¿ç¼“å­˜** | æ—  | âœ… æ’ä»¶ç«¯æ”¯æŒ |
| **å¤šæˆ¿é—´** | æ‰‹åŠ¨åˆ‡æ¢ | âœ… è‡ªåŠ¨ Tab åˆ‡æ¢ |
| **Protobuf è§£æ** | åŸºç¡€æ”¯æŒ | âœ… å®Œæ•´å®ç° |

---

## ğŸš€ è¿ç§»æ­¥éª¤

### 1. åœæ­¢æ—§ç‰ˆæœåŠ¡

```bash
# åœæ­¢ Node.js æœåŠ¡å™¨
cd server
# Ctrl+C æˆ–å…³é—­ç»ˆç«¯
```

### 2. å¤‡ä»½æ•°æ®ï¼ˆå¯é€‰ï¼‰

å¦‚æœ v2.x ç”Ÿæˆäº†æ—¥å¿—æ–‡ä»¶ï¼š
```bash
# å¤‡ä»½æ—¥å¿—
cp -r server/logs /path/to/backup/
```

### 3. å®‰è£…æ–°ç‰ˆ server-go

#### Windows
```bash
cd server-go
build.bat
dy-live-monitor.exe
```

**é¦–æ¬¡è¿è¡Œ**ï¼š
- å¦‚æœæ²¡æœ‰è®¸å¯è¯ï¼Œç¨‹åºä¼šæç¤ºæ¿€æ´»
- ä» `server-active` æœåŠ¡è·å–è®¸å¯è¯å­—ç¬¦ä¸²å¹¶ç²˜è´´

### 4. æ›´æ–°æµè§ˆå™¨æ’ä»¶

v3.x çš„ `browser-monitor` ä¸ v2.x çš„ `brower-monitor` **å…¼å®¹ä½†ä¸åŒ**ï¼š

**ä¸»è¦å˜åŒ–**ï¼š
1. âœ… æ·»åŠ ç¦»çº¿ç¼“å­˜ï¼ˆ`chrome.storage.local`ï¼‰
2. âœ… æ·»åŠ å¿ƒè·³æœºåˆ¶ï¼ˆæ¯ 30 ç§’ï¼‰
3. âœ… ä¿®æ”¹é»˜è®¤ WebSocket ç«¯å£ï¼ˆå¯é…ç½®ï¼‰

**æ›´æ–°æ–¹æ³•**ï¼š
1. åœ¨ Chrome/Edge ä¸­å¸è½½æ—§ç‰ˆæ’ä»¶
2. åŠ è½½æ–°ç‰ˆ `browser-monitor` ç›®å½•
3. é…ç½® WebSocket åœ°å€ï¼ˆé»˜è®¤ `ws://localhost:8090/ws`ï¼‰

### 5. éƒ¨ç½²è®¸å¯è¯æœåŠ¡ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦è®¸å¯è¯åŠŸèƒ½ï¼š

```bash
cd server-active

# 1. ç”Ÿæˆ RSA å¯†é’¥å¯¹
mkdir keys
openssl genrsa -out keys/private.pem 2048
openssl rsa -in keys/private.pem -pubout -out keys/public.pem

# 2. é…ç½® MySQL
# ç¼–è¾‘ config.json

# 3. å¯åŠ¨æœåŠ¡
build.bat
dy-live-license-server.exe
```

---

## ğŸ”§ é…ç½®è¿ç§»

### v2.x é…ç½®ï¼ˆ`server/config.json`ï¼‰
```json
{
  "port": 8080,
  "logEnabled": true
}
```

### v3.x é…ç½®ï¼ˆ`server-go/config.json`ï¼‰
```json
{
  "server": {
    "port": 8090
  },
  "database": {
    "path": "./data.db"
  },
  "license": {
    "server_url": "http://localhost:8080/api/v1",
    "public_key_path": "./public.pem"
  },
  "browser": {
    "chrome_path": "C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe",
    "startup_params": "--remote-debugging-port=9222"
  }
}
```

**è¿ç§»æ³¨æ„**ï¼š
- âš ï¸ ç«¯å£é»˜è®¤ä» `8080` æ”¹ä¸º `8090`ï¼ˆé¿å…å†²çªï¼‰
- âš ï¸ æ’ä»¶éœ€è¦æ›´æ–° WebSocket åœ°å€

---

## ğŸ“Š æ•°æ®è¿ç§»

### æ—¥å¿—æ–‡ä»¶è¿ç§»ï¼ˆå¦‚æœæœ‰ï¼‰

v2.x çš„æ—¥å¿—æ ¼å¼ï¼š
```
logs/
  2025-11-15/
    10_7123456789.txt
```

v3.x ä½¿ç”¨ SQLiteï¼š
- æ—¥å¿—æ•°æ®è‡ªåŠ¨å­˜å…¥ `data.db`
- å¯é€šè¿‡ä¸»ç•Œé¢æŸ¥çœ‹å†å²è®°å½•

**æ‰‹åŠ¨å¯¼å…¥è„šæœ¬**ï¼ˆå¾…å®ç°ï¼‰ï¼š
```bash
# æœªæ¥ç‰ˆæœ¬å°†æä¾›æ—¥å¿—å¯¼å…¥å·¥å…·
go run scripts/import_logs.go --input=server/logs --output=data.db
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: v3.x å¯åŠ¨å¤±è´¥ "æœªæ‰¾åˆ°æœ‰æ•ˆè®¸å¯è¯"
**A**: é¦–æ¬¡å¯åŠ¨éœ€è¦æ¿€æ´»è®¸å¯è¯ã€‚å¦‚æœåªæ˜¯æµ‹è¯•ï¼Œå¯ä»¥æš‚æ—¶æ³¨é‡Šæ‰ `main.go` ä¸­çš„è®¸å¯è¯æ ¡éªŒä»£ç ï¼š

```go
// 3. è®¸å¯è¯æ ¡éªŒï¼ˆå¼ºåˆ¶ï¼‰
// æ³¨é‡Šæ‰ä»¥ä¸‹ä»£ç å—è¿›è¡Œæµ‹è¯•
/*
licenseManager := license.NewManager(cfg.License.ServerURL, cfg.License.PublicKeyPath)
...
*/
```

### Q2: æ’ä»¶è¿æ¥ä¸ä¸Š server-go
**A**: æ£€æŸ¥ï¼š
1. `server-go` æ˜¯å¦æ­£åœ¨è¿è¡Œï¼ˆç³»ç»Ÿæ‰˜ç›˜åº”æœ‰å›¾æ ‡ï¼‰
2. WebSocket ç«¯å£æ˜¯å¦æ­£ç¡®ï¼ˆé»˜è®¤ `8090`ï¼‰
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ï¼ˆF12 æŸ¥çœ‹ï¼‰

### Q3: æ•°æ®æ²¡æœ‰æ˜¾ç¤ºåœ¨ä¸»ç•Œé¢
**A**: 
1. ç¡®ä¿æ’ä»¶å·²è¿æ¥ï¼ˆæŸ¥çœ‹æ’ä»¶ popup ç•Œé¢çŠ¶æ€ï¼‰
2. æ‰“å¼€æŠ–éŸ³ç›´æ’­é—´ï¼ˆ`live.douyin.com/[æˆ¿é—´å·]`ï¼‰
3. ç­‰å¾…å‡ ç§’ï¼Œæ•°æ®ä¼šè‡ªåŠ¨æ›´æ–°

### Q4: å¦‚ä½•ç»§ç»­ä½¿ç”¨ v2.xï¼Ÿ
**A**: v2.xï¼ˆNode.js ç‰ˆæœ¬ï¼‰ä»ç„¶ä¿ç•™åœ¨ `server/` ç›®å½•ï¼š
```bash
cd server
npm install
npm start
```

ä½†ä¸å†ç»´æŠ¤ï¼Œå»ºè®®å‡çº§åˆ° v3.xã€‚

---

## ğŸ”„ å›æ»šåˆ° v2.x

å¦‚æœ v3.x å‡ºç°é—®é¢˜ï¼š

```bash
# 1. åœæ­¢ server-go
# å…³é—­ Windows åº”ç”¨æˆ– Ctrl+C

# 2. å¯åŠ¨ v2.x
cd server
npm start

# 3. ä½¿ç”¨æ—§ç‰ˆæ’ä»¶
# åœ¨ Chrome/Edge ä¸­åŠ è½½ brower-monitor ç›®å½•
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°è¿ç§»é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- `/workspace/FINAL_STATUS.md` - æœ€ç»ˆå®ŒæˆçŠ¶æ€
- `/workspace/server-go/README.md` - Go åç«¯æ–‡æ¡£
- `/workspace/server-active/README.md` - è®¸å¯è¯æœåŠ¡æ–‡æ¡£

---

**æ›´æ–°æ—¥æœŸ**: 2025-11-15  
**è¿ç§»éš¾åº¦**: â­â­ (ä¸­ç­‰)
